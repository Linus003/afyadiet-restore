module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},50463,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"skeleton",className:(0,c.cn)("bg-accent animate-pulse rounded-md",a),...d})}a.s(["Skeleton",()=>d])},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},3311,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(40695),f=a.i(76504),g=a.i(20005),h=a.i(46842);function i(){let a=(0,d.useRouter)(),i=async()=>{await fetch("/api/auth/logout",{method:"POST"}),a.push("/")};return(0,b.jsxs)("nav",{className:"flex items-center justify-between px-6 py-4 border-b border-border bg-card",children:[(0,b.jsx)(c.default,{href:"/nutritionist/dashboard",className:"text-2xl font-bold text-primary",children:"AfyaDiet"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(c.default,{href:"/nutritionist/appointments",children:(0,b.jsx)(e.Button,{variant:"ghost",children:"Appointments"})}),(0,b.jsx)(c.default,{href:"/nutritionist/meal-plans",children:(0,b.jsx)(e.Button,{variant:"ghost",children:"Meal Plans"})}),(0,b.jsxs)(f.DropdownMenu,{children:[(0,b.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(h.User,{className:"w-4 h-4 mr-2"}),"Account"]})}),(0,b.jsxs)(f.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,b.jsx)(c.default,{href:"/nutritionist/profile",children:"My Profile"})}),(0,b.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,b.jsx)(c.default,{href:"/nutritionist/availability",children:"Availability"})}),(0,b.jsx)(f.DropdownMenuSeparator,{}),(0,b.jsxs)(f.DropdownMenuItem,{onClick:i,className:"text-destructive",children:[(0,b.jsx)(g.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})]})]})}a.s(["NutritionistNav",()=>i])},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},46893,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},73320,a=>{"use strict";let b=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],73320)},54161,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},65602,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(97895);let e=(0,c.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,d.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}a.s(["Alert",()=>f,"AlertDescription",()=>h,"AlertTitle",()=>g])},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},17757,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(3311),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(46893),j=a.i(3130),k=a.i(50463),l=a.i(54161),m=a.i(50104),n=a.i(46872),o=a.i(72752),p=a.i(30553),q="Avatar",[r,s]=(0,m.createContextScope)(q),[t,u]=r(q),v=c.forwardRef((a,d)=>{let{__scopeAvatar:e,...f}=a,[g,h]=c.useState("idle");return(0,b.jsx)(t,{scope:e,imageLoadingStatus:g,onImageLoadingStatusChange:h,children:(0,b.jsx)(p.Primitive.span,{...f,ref:d})})});v.displayName=q;var w="AvatarImage",x=c.forwardRef((a,d)=>{let{__scopeAvatar:e,src:f,onLoadingStatusChange:g=()=>{},...h}=a,i=u(w,e),j=function(a,b){let[d,e]=c.useState("idle");return(0,o.useLayoutEffect)(()=>{if(!a)return void e("error");let c=!0,d=new window.Image,f=a=>()=>{c&&e(a)};return e("loading"),d.onload=f("loaded"),d.onerror=f("error"),d.src=a,b&&(d.referrerPolicy=b),()=>{c=!1}},[a,b]),d}(f,h.referrerPolicy),k=(0,n.useCallbackRef)(a=>{g(a),i.onImageLoadingStatusChange(a)});return(0,o.useLayoutEffect)(()=>{"idle"!==j&&k(j)},[j,k]),"loaded"===j?(0,b.jsx)(p.Primitive.img,{...h,ref:d,src:f}):null});x.displayName=w;var y="AvatarFallback",z=c.forwardRef((a,d)=>{let{__scopeAvatar:e,delayMs:f,...g}=a,h=u(y,e),[i,j]=c.useState(void 0===f);return c.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>j(!0),f);return()=>window.clearTimeout(a)}},[f]),i&&"loaded"!==h.imageLoadingStatus?(0,b.jsx)(p.Primitive.span,{...g,ref:d}):null});z.displayName=y;var A=a.i(97895);function B({className:a,...c}){return(0,b.jsx)(v,{"data-slot":"avatar",className:(0,A.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function C({className:a,...c}){return(0,b.jsx)(x,{"data-slot":"avatar-image",className:(0,A.cn)("aspect-square size-full",a),...c})}function D({className:a,...c}){return(0,b.jsx)(z,{"data-slot":"avatar-fallback",className:(0,A.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}let E=(0,a.i(70106).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var F=a.i(92e3),G=a.i(16201),H=a.i(73320),I=a.i(24987),J=a.i(65602);let K=["Clinical Nutrition","Sports Nutrition","Pediatric Nutrition","Weight Management","Diabetes Management","Gut Health","Vegan/Vegetarian","General Wellness","Maternal Health","Eating Disorders","Renal Nutrition","Ketogenic Diet"],L=["Nairobi","Mombasa","Kisumu","Nakuru","Uasin Gishu","Meru","Kiambu","Machakos","Kajiado","Nyeri","Kilifi","Garissa","Embu","Kakamega","Bungoma","Kitui","Makueni","Murang'a","Kirinyaga","Kisii","Nyamira","Kericho","Bomet","Nandi","Trans Nzoia","Turkana","Marsabit","Isiolo","Mandera","Wajir","Tana River","Lamu","Taita Taveta","Kwale","Nyandarua","Laikipia","Narok","Samburu","West Pokot","Elgeyo Marakwet","Baringo","Vihiga","Busia","Siaya","Homa Bay","Migori","Tharaka-Nithi"];function M(){let a=(0,d.useRouter)(),m=(0,c.useRef)(null),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)({bio:"",specializations:[],certifications:"",yearsExperience:0,hourlyRate:0,avatarUrl:"",county:""});(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch("/api/nutritionist/profile");if(401===b.status)return void a.push("/login");let c=await b.json();if(!b.ok)throw Error(c.error||"Failed to load profile");if(c.profile){w(c.profile.is_verified),y(c.profile.full_name);let a=[],b=c.profile.specializations||c.profile.specialty;Array.isArray(b)?a=b:"string"==typeof b&&(a=b.split(",").map(a=>a.trim()).filter(a=>""!==a)),A({bio:c.profile.bio||"",specializations:a,certifications:c.profile.certifications||"",yearsExperience:c.profile.years_experience||0,hourlyRate:c.profile.hourly_rate||0,avatarUrl:c.profile.avatar_url||"",county:c.profile.county||""})}}catch(a){s(a.message)}finally{o(!1)}})()},[a]);let M=async()=>{if(!z.county){s("Please select your practicing county."),window.scrollTo({top:0,behavior:"smooth"});return}q(!0),s(null),u(null);try{let a=await fetch("/api/nutritionist/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)}),b=await a.json();if(!a.ok)throw Error(b.error||"Something went wrong saving the profile.");u("Profile saved successfully! Your changes are now live."),window.scrollTo({top:0,behavior:"smooth"})}catch(a){s(a.message),window.scrollTo({top:0,behavior:"smooth"})}finally{q(!1)}};return n?(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)(k.Skeleton,{className:"h-96 w-full max-w-2xl mx-auto"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(e.NutritionistNav,{}),(0,b.jsxs)("main",{className:"max-w-3xl mx-auto px-6 py-12",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"My Professional Profile"}),v?(0,b.jsxs)(l.Badge,{className:"bg-blue-600 hover:bg-blue-700 text-white gap-1 px-3 py-1",children:[(0,b.jsx)(G.CheckCircle,{className:"w-4 h-4"})," Verified Nutritionist"]}):(0,b.jsxs)(l.Badge,{variant:"outline",className:"text-yellow-600 border-yellow-600 gap-1 px-3 py-1 bg-yellow-50",children:[(0,b.jsx)(F.AlertCircle,{className:"w-4 h-4"})," Verification Pending"]})]}),r&&(0,b.jsxs)(J.Alert,{variant:"destructive",className:"mb-6 bg-red-50 text-red-900 border-red-200",children:[(0,b.jsx)(F.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(J.AlertTitle,{children:"Error"}),(0,b.jsx)(J.AlertDescription,{children:r})]}),t&&(0,b.jsxs)(J.Alert,{className:"mb-6 bg-green-50 text-green-900 border-green-200",children:[(0,b.jsx)(G.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)(J.AlertTitle,{children:"Success"}),(0,b.jsx)(J.AlertDescription,{children:t})]}),(0,b.jsxs)("div",{className:"grid gap-6",children:[(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Profile Picture"}),(0,b.jsx)(j.CardDescription,{children:"Click the image to upload a new photo."})]}),(0,b.jsxs)(j.CardContent,{className:"flex flex-col items-center",children:[(0,b.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>m.current?.click(),children:[(0,b.jsxs)(B,{className:"w-32 h-32 border-4 border-white shadow-lg",children:[(0,b.jsx)(C,{src:z.avatarUrl,className:"object-cover"}),(0,b.jsx)(D,{className:"text-4xl bg-slate-200",children:x.slice(0,2).toUpperCase()})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(E,{className:"w-8 h-8 text-white"})})]}),(0,b.jsx)("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>4194304)return void s("Image file is too large. Please choose an image under 4MB.");let a=new FileReader;a.onloadend=()=>{A(b=>({...b,avatarUrl:a.result})),s(null)},a.readAsDataURL(b)}}}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>m.current?.click(),children:[(0,b.jsx)(H.Upload,{className:"w-4 h-4 mr-2"})," Upload Photo"]})]})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Details & Expertise"})}),(0,b.jsxs)(j.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-green-50/50 p-4 rounded-lg border border-green-100",children:[(0,b.jsxs)(h.Label,{htmlFor:"county",className:"flex items-center gap-2 mb-2 font-bold text-green-900",children:[(0,b.jsx)(I.MapPin,{className:"w-4 h-4 text-green-600"})," Practicing County"]}),(0,b.jsxs)("select",{id:"county",required:!0,value:z.county,onChange:a=>A({...z,county:a.target.value}),className:"w-full p-2 rounded-md border border-input bg-background text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[(0,b.jsx)("option",{value:"",children:"-- Select Your Location --"}),L.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Clients will find you based on this location."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"bio",children:"Bio"}),(0,b.jsx)(i.Textarea,{id:"bio",placeholder:"Tell clients about your expertise...",value:z.bio,onChange:a=>A({...z,bio:a.target.value}),className:"min-h-32"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Specializations"}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 border border-input p-4 rounded-md bg-secondary/10",children:K.map(a=>(0,b.jsxs)("label",{className:`
                        flex items-center space-x-3 cursor-pointer p-2 rounded transition-colors
                        ${z.specializations.includes(a)?"bg-primary/10 border-primary":"hover:bg-accent"}
                        `,children:[(0,b.jsx)("input",{type:"checkbox",className:"rounded border-gray-400 text-primary focus:ring-primary h-4 w-4",checked:z.specializations.includes(a),onChange:()=>{A(b=>{let c=b.specializations;return c.includes(a)?{...b,specializations:c.filter(b=>b!==a)}:{...b,specializations:[...c,a]}})}}),(0,b.jsx)("span",{className:"text-sm font-medium leading-none",children:a})]},a))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"certifications",children:"Certifications"}),(0,b.jsx)(i.Textarea,{id:"certifications",placeholder:"List your degrees and certifications...",value:z.certifications,onChange:a=>A({...z,certifications:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"experience",children:"Years Experience"}),(0,b.jsx)(g.Input,{id:"experience",type:"number",min:"0",value:z.yearsExperience,onChange:a=>A({...z,yearsExperience:Number.parseInt(a.target.value)||0})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"rate",children:"Hourly Rate (ksh)"}),(0,b.jsx)(g.Input,{id:"rate",type:"number",min:"0",step:"0.01",value:z.hourlyRate,onChange:a=>A({...z,hourlyRate:Number.parseFloat(a.target.value)||0})})]})]}),(0,b.jsx)(f.Button,{onClick:M,disabled:p,className:"w-full text-lg py-6",children:p?"Saving Changes...":"Save Profile"})]})]})]})]})]})}a.s(["default",()=>M],17757)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c8f89670._.js.map